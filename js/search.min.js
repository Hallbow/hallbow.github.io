(function(){function n(n){if(r)n(r);else{var e=new XMLHttpRequest;e.open("GET",g,!0),e.onload=function(){if(this.status>=200&&this.status<300){var e=JSON.parse(this.response);r=e instanceof Array?e:e.posts,n(r)}else console.error(this.statusText)},e.onerror=function(){console.error(this.statusText)},e.send()}}function e(n,e){return n.replace(/\{\w+\}/g,function(n){var t=n.replace(/\{|\}/g,"");return e[t]||""})}function t(n){var t="";t=n.length?n.map(function(n){return e(v,{title:n.title,path:(o.BLOG.ROOT+"/"+n.path).replace(/\/{2}/g,"/"),date:new Date(n.date).toLocaleDateString(),tags:n.tags.map(function(n){return"<span>#"+n.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',L.innerHTML=t}function i(n,e){return e.lastIndex=0,e.test(n)}function s(n,e){return i(n.title,e)||n.tags.some(function(n){return i(n.name,e)})||i(n.text,e)}function a(e){var i=this.value.trim();if(i){var a=new RegExp(i.replace(/[ ]/g,"|"),"gmi");n(function(n){var e=n.filter(function(n){return s(n,a)});t(e),O.show()}),e.preventDefault()}}var r,o=window||this,c=o.BLOG.even,u=o.BLOG.$,l=u("#search"),d=u("#search-wrap"),f=u("#key"),p=u("#back"),h=u("#search-panel"),L=u("#search-result"),v=u("#search-tpl").innerHTML,g=(o.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),w=o.BLOG.docEl,m=o.BLOG.noop,O={show:function(){window.innerWidth<760?w.classList.add("lock-size"):m,h.classList.add("in")},hide:function(){window.innerWidth<760?w.classList.remove("lock-size"):m,h.classList.remove("in")}};l.addEventListener(c,function(){d.classList.toggle("in"),f.value="",d.classList.contains("in")?f.focus():f.blur()}),p.addEventListener(c,function(){d.classList.remove("in"),O.hide()}),document.addEventListener(c,function(n){"key"!==n.target.id&&O.hide()}),f.addEventListener("input",a),f.addEventListener(c,a)}).call(this);